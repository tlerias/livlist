"use strict";var app=angular.module("livListApp",["ngCookies","ngResource","ngSanitize","ngRoute"]);app.config(function(a){a.when("/",{templateUrl:"../views/main.html",controller:"CardCtrl"})}),angular.module("livListApp").controller("CardCtrl",function(a,b){a.cards=[],a.question_text="",a.description_text="",b.getCards().then(function(b){a.cards=b.data}),a.addCard=function(){console.log("in the controller, creating a card"),b.create(a.question_text,a.description_text),a.question_text="",a.description_text=""}}),app.factory("Card",function(a){var b={getCards:function(){var b=a.get("/cards").success(function(a){return console.log("get cards success: "+a),a});return b},create:function(b,c){return console.log("title & descript: "+b+c),a.post("/add",{title:b,description:c}).success(function(a){console.log(a),console.log("sent to route")})}};return b});var mongoose=require("mongoose"),Schema=mongoose.Schema;mongoose.connect("mongodb://localhost/livlust");var db=mongoose.connection;db.on("error",console.error.bind(console,"connection error:"));var CardSchema=new Schema({title:String,content:String,create_date:{type:Date,"default":Date.now}});exports.Card=mongoose.model("Card",CardSchema);var express=require("express"),router=express.Router(),models=require("../models");router.get("/cards",function(a,b){console.log(models.Card),models.Card.find({},function(a,c){if(a)throw a;console.log("express route: "+c),b.json(c,200)})}),router.post("/add",function(a,b){console.log("in express:"+a.body.title);var c=a.body.title,d=a.body.description,e=new models.Card({title:c,content:d});e.save(),b.json(200)}),module.exports=router;